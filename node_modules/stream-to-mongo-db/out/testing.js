"use strict";

const JSONStream = require("JSONStream");
const Rx = require("rxjs");
const fs = require('fs');

const x = stream => {
    return Rx.Observable.create(observer => stream.pipe(JSONStream.parse('*')).on('data', data => observer.next(data)).on('error', err => observer.error(err)).on('end', () => observer.complete()));
};

const ss = fs.createReadStream('./myJsonData.json');

x(ss).bufferCount(7).subscribe({
    next: obj => console.log("batch:", obj)
});